\documentclass{scrreprt}

% Language-specific settings
\usepackage{polyglossia}
\setdefaultlanguage{american}

% Fonts
\usepackage{fontspec,microtype}
\setmainfont{Linux Libertine O}
\setsansfont{Linux Libertine O}
\setmonofont[Scale=MatchLowercase]{FantasqueSansMono-Regular.ttf}

% Hyperlinks
\usepackage{xcolor}
\definecolor{darkblue}{rgb}{0,0,0.5}
\definecolor{darkgreen}{rgb}{0,0.3,0}
\usepackage[pdftitle={Solutions to Structure and Interpretation of Computer 
Programs}, pdfauthor={Fabienne Ducroquet}, urlcolor=darkblue, 
linkcolor=darkgreen, breaklinks, colorlinks]{hyperref}

% Headers
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhead[RO,LE]{\thepage}
\fancyhead[LO]{\rightmark}
\fancyhead[RE]{\leftmark}

% Source code highlighting
\usepackage{minted}
\newminted[cscm]{scheme}{autogobble,style=lovelace}
\newmintedfile[scm]{scheme}{style=lovelace}
\newmintinline[vscm]{scheme}{style=bw}

% Show subsubsections in the table of contents.
\setcounter{tocdepth}{4}

% Theorem environments
\usepackage{amssymb,amsmath,amsthm}
\newtheoremstyle{break}{}{}{}{-12pt}{\bfseries}{}{\newline}{}
\theoremstyle{break}
\newtheorem{exeaux}{Exercise}[chapter]

% For exercise 2.24, and some exercises in chapter 3
\usepackage{tikz}
\usetikzlibrary{positioning, arrows.meta}
% \usegdlibrary{trees, layered}
\newcommand\var[2]{%
\newlength{#1}
\setlength{#1}{#2}
}

% Include the exercises in the table of contents.
\NewDocumentEnvironment{exe}{o}
{\IfNoValueTF{#1}
    {\exeaux\addcontentsline{toc}{subsubsection}%
        {Exercise}}
    {\exeaux\addcontentsline{toc}{subsubsection}%
        {Exercise #1}}%
        \ignorespaces}
{\endexeaux}

\newtheoremstyle{example}{}{}{}{}{\itshape}{:}{ }{}
\theoremstyle{example}
\newtheorem*{example}{Example}

\newtheoremstyle{remark}{}{}{}{}{\bfseries}{.}{ }{}
\theoremstyle{remark}
\newtheorem*{remark}{Remark}

\newtheoremstyle{comp}{}{}{\small}{}{\itshape}{:}{\newline}{}
\theoremstyle{comp}
\newtheorem*{comp}{Complement}

% For inline fractions
\usepackage{xfrac}

\title{Solutions to Structure and Interpretation of Computer Programs}
\author{Fabienne \textsc{Ducroquet}}

\begin{document}

\maketitle

\tableofcontents

\chapter*{Introduction}

Solutions to most of the exercises of \emph{Structure and Interpretation of 
Computer Programs}, second edition, by Harold \textsc{Abelson} and Gerald Jay 
\textsc{Sussman} with Julie \textsc{Sussman}.

The answers to these exercises have been tested with the Scheme interpreter from 
\href{http://gambitscheme.org}{Gambit Scheme}, at the exception of the exercises 
from section 2.2.4 about the picture language, which have been written with 
\href{http://racket-lang.org}{Racket}, using the \vscm{graphics.ss} library.

\include{ch1}
\include{ch2}
\include{ch3}

\end{document}
